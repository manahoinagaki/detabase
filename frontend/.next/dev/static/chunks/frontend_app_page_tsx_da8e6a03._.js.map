{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/T24091/app/detabase/frontend/app/page.tsx"],"sourcesContent":["// \\frontend\\Alternative_data_frontend\\frontend\\app\\page.tsx\r\n\r\n\"use client\";\r\n\"use client\";\r\nimport { useEffect, useMemo, useState, type ReactNode } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport {\r\n    ResponsiveContainer,\r\n    AreaChart,\r\n    Area,\r\n    CartesianGrid,\r\n    XAxis,\r\n    YAxis,\r\n    Tooltip,\r\n    Brush,\r\n} from \"recharts\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\n// --- API 設定 ---\r\nconst fetcher = async (url: string) => {\r\n    const res = await fetch(url);\r\n    try { return await res.json(); } catch { return null; }\r\n};\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:8000\";\r\nconst MapCard = dynamic(() => import(\"../components/MapCard\"), { ssr: false });\r\n\r\n// ---------------- UI/表示コンポーネント (変更なし) ----------------\r\nfunction StatCard({ label, value, delta }: { label: string; value: string; delta?: string }) {\r\n    return (\r\n        <div className=\"rounded-2xl shadow-soft p-5 bg-surface-200 border border-brand-900/40\">\r\n            <div className=\"text-sm text-brand-200/80\">{label}</div>\r\n            <div className=\"mt-2 text-3xl font-semibold text-white\">{value}</div>\r\n            {delta && <div className=\"mt-1 text-xs text-brand-200/70\">前週比 {delta}</div>}\r\n        </div>\r\n    );\r\n}\r\nfunction Badge({ children }: { children: ReactNode }) {\r\n    return (\r\n        <span className=\"inline-flex items-center rounded-lg border border-brand-800/60 bg-surface-100 px-2 py-0.5 text-[11px] text-brand-100/90\">\r\n            {children}\r\n        </span>\r\n    );\r\n}\r\nfunction HelpDialog({ open, onClose }: { open: boolean; onClose: () => void }) {\r\n    if (!open) return null;\r\n    return (\r\n        <div role=\"dialog\" aria-modal=\"true\" aria-label=\"使い方ヘルプ\" className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n            <div className=\"absolute inset-0 bg-black/60\" onClick={onClose} />\r\n            <div className=\"relative w-[min(720px,90vw)] rounded-2xl border border-brand-900/50 bg-surface-200 p-6 shadow-soft\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-white text-lg font-semibold\">使い方ヘルプ</h3>\r\n                    <button className=\"text-brand-200/80 hover:text-white\" onClick={onClose} aria-label=\"閉じる\">×</button>\r\n                </div>\r\n                <div className=\"mt-4 space-y-4 text-sm text-brand-100/90\">\r\n                    <div>\r\n                        <div className=\"font-medium text-brand-50\">① 範囲プリセット</div>\r\n                        <p>\r\n                            <Badge>日</Badge> / <Badge>週</Badge> / <Badge>月</Badge> / <Badge>年</Badge> / <Badge>最大</Badge> で\r\n                            “表示するデータ点数”を切替えます（バックエンドが週次でも見た目が大きく変わります）。\r\n                        </p>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"font-medium text-brand-50\">② 過去へ／先へ</div>\r\n                        <p>◀ / ▶ は現在のウィンドウ幅ぶんだけ隣接ウィンドウにスライドします。⏮＝最古、⏭＝最新。</p>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"font-medium text-brand-50\">③ ブラシ</div>\r\n                        <p>下の小窓で範囲をドラッグすると <Badge>カスタム</Badge> 表示になります。</p>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"font-medium text-brand-50\">④ 変動の根拠</div>\r\n                        <p>ツールチップと表に <Badge>evidence</Badge>（寄与）を表示します。</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"mt-6 text-xs text-brand-200/70\">Esc で閉じます。</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nfunction CustomTooltip({ active, payload, label }: any) {\r\n    if (!active || !payload || !payload.length) return null;\r\n    const p = payload[0]?.payload ?? {};\r\n    const reasons: any[] = p.evidence ?? [];\r\n    const dateLabel = new Date(typeof label === \"number\" ? label : p.x).toLocaleDateString(\"ja-JP\", { month: \"2-digit\", day: \"2-digit\" });\r\n    return (\r\n        <div className=\"rounded-xl border border-brand-900/50 bg-surface-100 p-3 shadow-soft\">\r\n            <div className=\"text-xs text-brand-200/80\">週: {dateLabel}</div>\r\n            <div className=\"mt-1 text-white text-sm font-semibold\">値: {Number(p.value).toFixed(2)}</div>\r\n            {reasons.length ? (\r\n                <div className=\"mt-2 space-y-1\">\r\n                    <div className=\"text-xs text-brand-200/80\">変動の根拠</div>\r\n                    <ul className=\"space-y-1\">\r\n                        {reasons.slice(0, 5).map((r, i) => (\r\n                            <li key={i} className=\"text-[12px] text-brand-100/90\">\r\n                                <Badge>{r.source ?? r.name ?? \"要因\"}</Badge>\r\n                                {typeof r.weight === \"number\" && <span className=\"ml-2 opacity-80\">寄与: {(r.weight * 100).toFixed(0)}%</span>}\r\n                                {r.note && <span className=\"ml-2 opacity-80\">{r.note}</span>}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            ) : <div className=\"mt-2 text-[12px] text-brand-200/70\">根拠データなし</div>}\r\n        </div>\r\n    );\r\n}\r\n\r\n// ---------------- 範囲ロジック（点数ベース） ----------------\r\ntype RangeMode = \"DAY\" | \"WEEK\" | \"MONTH\" | \"YEAR\" | \"ALL\";\r\n\r\n// 週次データでも確実に見た目が変わる点数\r\nconst WINDOW_POINTS: Record<Exclude<RangeMode, \"CUSTOM\">, number> = {\r\n    DAY: 12,     // 直近12点（約3ヶ月の週次でもギュッと）\r\n    WEEK: 26,    // 約半年\r\n    MONTH: 52,   // 約1年\r\n    YEAR: 156,   // 約3年\r\n    ALL: Infinity,\r\n};\r\n\r\n// ---------------- メインページコンポーネント ----------------\r\nexport default function Page() {\r\n    const [metric, setMetric] = useState(\"mfg_index\");\r\n    const [helpOpen, setHelpOpen] = useState(false);\r\n    const [mode, setMode] = useState<RangeMode>(\"MONTH\"); // 既定は「月」\r\n    const [attrLoaded, setAttrLoaded] = useState(false); // 属性データが読み込まれたか追跡\r\n\r\n    // データ取得 (教授のAPIエンドポイントを使用)\r\n    const { data: ts } = useSWR(`${API_BASE}/api/timeseries?metric=${metric}&frequency=weekly`, fetcher);\r\n    // 属性データはダミーなので、ここでは単一のSWRフックに統合（attrは不要）\r\n    const { data: geo } = useSWR(`${API_BASE}/api/geo/activity`, fetcher);\r\n\r\n    // date→evidence マッピング (教授のバックエンドはattributionエンドポイントを持たないため、tsデータにevidenceが直接含まれることを前提とする)\r\n    const evidenceMap = useMemo(() => {\r\n        const m = new Map<string, any[]>();\r\n        if (ts?.series) {\r\n            for (const p of ts.series) {\r\n                const k = new Date(p.date).toISOString().slice(0, 10);\r\n                const r = p.evidence ?? p.drivers ?? p.attribution;\r\n                if (r) m.set(k, r);\r\n            }\r\n        }\r\n        // NOTE: 教授のバックエンドにはevidenceフィールドがないため、実際にはこのマップは空になります。\r\n        // ここでは、データポイントの 'activity' 値を evidence として表示する仮ロジックは省略します。\r\n        return m;\r\n    }, [ts]);\r\n\r\n\r\n    // グラフ用データ\r\n    const chartData = useMemo(() => {\r\n        if (!ts?.series) return [];\r\n        return ts.series.map((p: any) => {\r\n            const iso = new Date(p.date).toISOString().slice(0, 10);\r\n            const x = new Date(iso).getTime();\r\n            // evidenceMapからデータを取得\r\n            return { iso, x, value: p.value, evidence: evidenceMap.get(iso) ?? [] };\r\n        });\r\n    }, [ts, evidenceMap]);\r\n\r\n    const len = chartData.length;\r\n\r\n    // 表示しているデータ点（インデックス範囲: 両端含む）\r\n    const [idxRange, setIdxRange] = useState<[number, number] | null>(null);\r\n\r\n    // モード切替時：最新側にウィンドウを合わせる\r\n    useEffect(() => {\r\n        if (len === 0) return;\r\n        const pointMode = mode as Exclude<RangeMode, \"CUSTOM\">;\r\n        if (mode === 'CUSTOM') {\r\n            return;\r\n        }\r\n        const width = WINDOW_POINTS[pointMode] === Infinity ? len : Math.min(WINDOW_POINTS[pointMode], len);\r\n        const start = WINDOW_POINTS[pointMode] === Infinity ? 0 : Math.max(0, len - width);\r\n        const end = len - 1;\r\n\r\n        setIdxRange([start, end]);\r\n    }, [mode, len]);\r\n\r\n    // X軸 domain をインデックスから計算\r\n    const domain: [number, number] | undefined = useMemo(() => {\r\n        if (!idxRange || len === 0) return undefined;\r\n        const [s, e] = idxRange;\r\n        return [chartData[s].x, chartData[e].x];\r\n    }, [idxRange, chartData, len]);\r\n\r\n    // ---- ナビゲーション（隣接ウィンドウにピタッと送る）----\r\n    const step = (dir: -1 | 1) => {\r\n        if (!idxRange || len === 0) return;\r\n        const [s, e] = idxRange;\r\n        const width = e - s + 1;\r\n\r\n        let ns: number, ne: number;\r\n        if (dir === -1) {\r\n            ne = s - 1;\r\n            ns = ne - (width - 1);\r\n        } else {\r\n            ns = e + 1;\r\n            ne = ns + (width - 1);\r\n        }\r\n\r\n        // クランプ（幅は維持）\r\n        if (ns < 0) {\r\n            ns = 0;\r\n            ne = Math.min(len - 1, ns + width - 1);\r\n        }\r\n        if (ne > len - 1) {\r\n            ne = len - 1;\r\n            ns = Math.max(0, ne - (width - 1));\r\n        }\r\n\r\n        setIdxRange([ns, ne]);\r\n    };\r\n\r\n    const jumpOldest = () => {\r\n        if (len === 0 || !idxRange) return;\r\n        const width = idxRange[1] - idxRange[0] + 1;\r\n        const ns = 0;\r\n        const ne = Math.min(len - 1, ns + width - 1);\r\n        setIdxRange([ns, ne]);\r\n    };\r\n\r\n    const jumpNewest = () => {\r\n        if (len === 0 || !idxRange) return;\r\n        const width = idxRange[1] - idxRange[0] + 1;\r\n        const ne = len - 1;\r\n        const ns = Math.max(0, ne - (width - 1));\r\n        setIdxRange([ns, ne]);\r\n    };\r\n\r\n    // Brush → カスタム範囲\r\n    const onBrushChange = (range: { startIndex?: number; endIndex?: number }) => {\r\n        const { startIndex, endIndex } = range;\r\n        if (startIndex == null || endIndex == null) return;\r\n        const s = Math.max(0, Math.min(startIndex, endIndex));\r\n        const e = Math.min(len - 1, Math.max(startIndex, endIndex));\r\n        setIdxRange([s, e]);\r\n        // setMode(\"CUSTOM\"); // カスタムモード切り替えが必要なら有効化\r\n    };\r\n\r\n    // サマリー\r\n    const latest = chartData.at(-1)?.value;\r\n    const prev = chartData.at(-2)?.value ?? latest ?? 0;\r\n    const deltaVal = (Number(latest ?? 0) - Number(prev ?? 0));\r\n    const delta = (deltaVal >= 0 ? \"+\" : \"\") + deltaVal.toFixed(2);\r\n\r\n    type ChartPoint = {\r\n        iso: string;\r\n        x: number;\r\n        value: number;\r\n        evidence: any[]; // evidenceの具体的な型が不明なためany[]とする\r\n    };\r\n\r\n    return (\r\n        <main className=\"min-h-screen px-6 py-6 md:px-10\">\r\n            {/* ヘッダー */}\r\n            <header className=\"mb-6 flex items-center justify-between\">\r\n                <h1 className=\"text-white text-2xl md:text-3xl font-semibold tracking-tight\">\r\n                    製造業ナウキャスト・ダッシュボード\r\n                </h1>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <select\r\n                        className=\"bg-surface-100 border border-brand-800 text-white text-sm rounded-xl px-3 py-2\"\r\n                        value={metric}\r\n                        onChange={e => setMetric(e.target.value)}\r\n                        aria-label=\"メトリクスを選択\"\r\n                    >\r\n                        <option value=\"mfg_index\">製造業指数</option>\r\n                        <option value=\"orders\">新規受注</option>\r\n                    </select>\r\n                    <button\r\n                        className=\"rounded-xl border border-brand-800 bg-surface-100 px-3 py-2 text-sm text-brand-100/90 hover:text-white\"\r\n                        onClick={() => setHelpOpen(true)}\r\n                        aria-haspopup=\"dialog\"\r\n                    >\r\n                        ？ ヘルプ\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            {/* サマリー */}\r\n            <section className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <StatCard label=\"最新値\" value={Number.isFinite(Number(latest)) ? Number(latest).toFixed(2) : \"—\"} delta={delta} />\r\n                <StatCard label=\"サンプル: 直近観測数\" value={(len ?? 0).toString()} />\r\n                <StatCard label=\"メトリクス\" value={metric === \"mfg_index\" ? \"製造業指数\" : \"新規受注\"} />\r\n            </section>\r\n\r\n            {/* グラフ＆レンジ操作 */}\r\n            <section className=\"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                <div className=\"lg:col-span-2 rounded-2xl shadow-soft p-5 bg-surface-200 border border-brand-900/40\">\r\n                    {/* コントロールバー */}\r\n                    <div className=\"mb-3 flex flex-wrap items-center justify-between gap-3\">\r\n                        <div className=\"flex items-center gap-1\">\r\n                            {([\"DAY\", \"WEEK\", \"MONTH\", \"YEAR\", \"ALL\"] as RangeMode[]).map((m) => (\r\n                                <button\r\n                                    key={m}\r\n                                    onClick={() => setMode(m)}\r\n                                    className={`px-3 py-1.5 text-xs rounded-lg border ${mode === m\r\n                                            ? \"border-cyan-400 text-white bg-cyan-400/10\"\r\n                                            : \"border-brand-800 text-brand-100/90 bg-surface-100 hover:text-white\"\r\n                                        }`}\r\n                                >\r\n                                    {m === \"DAY\" && \"日\"}\r\n                                    {m === \"WEEK\" && \"週\"}\r\n                                    {m === \"MONTH\" && \"月\"}\r\n                                    {m === \"YEAR\" && \"年\"}\r\n                                    {m === \"ALL\" && \"最大\"}\r\n                                </button>\r\n                            ))}\r\n                            {mode === \"CUSTOM\" && <Badge>カスタム</Badge>}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <button className=\"px-2 py-1 text-xs rounded-lg border border-brand-800 bg-surface-100 text-brand-100/90 hover:text-white\" onClick={jumpOldest} title=\"最古へ\">⏮</button>\r\n                            <button className=\"px-2 py-1 text-xs rounded-lg border border-brand-800 bg-surface-100 text-brand-100/90 hover:text-white\" onClick={() => step(-1)} title=\"左へ（過去へ）\">◀</button>\r\n                            <button className=\"px-2 py-1 text-xs rounded-lg border border-brand-800 bg-surface-100 text-brand-100/90 hover:text-white\" onClick={() => step(1)} title=\"右へ（先へ）\">▶</button>\r\n                            <button className=\"px-2 py-1 text-xs rounded-lg border border-brand-800 bg-surface-100 text-brand-100/90 hover:text-white\" onClick={jumpNewest} title=\"最新へ\">⏭</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* チャート */}\r\n                    <div className=\"h-80\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <AreaChart\r\n                                key={`${idxRange?.[0]}-${idxRange?.[1]}`}\r\n                                data={chartData}\r\n                                margin={{ top: 8, right: 12, left: 12, bottom: 8 }}\r\n                            >\r\n                                <defs>\r\n                                    <linearGradient id=\"grad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor=\"#10a8dc\" stopOpacity={0.6} />\r\n                                        <stop offset=\"95%\" stopColor=\"#10a8dc\" stopOpacity={0} />\r\n                                    </linearGradient>\r\n                                </defs>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#074e66\" opacity={0.3} />\r\n                                <XAxis\r\n                                    dataKey=\"x\"\r\n                                    type=\"number\"\r\n                                    scale=\"time\"\r\n                                    domain={domain ?? [\"dataMin\", \"dataMax\"]}\r\n                                    allowDataOverflow\r\n                                    stroke=\"#92e4ff\"\r\n                                    tick={{ fontSize: 12 }}\r\n                                    tickFormatter={(v: number) =>\r\n                                        new Date(v).toLocaleDateString(\"ja-JP\", { month: \"2-digit\", day: \"2-digit\" })\r\n                                    }\r\n                                />\r\n                                <YAxis stroke=\"#92e4ff\" tick={{ fontSize: 12 }} />\r\n                                <Tooltip content={<CustomTooltip />} />\r\n                                <Area type=\"monotone\" dataKey=\"value\" stroke=\"#10a8dc\" fillOpacity={1} fill=\"url(#grad)\" />\r\n                                <Brush\r\n                                    dataKey=\"x\"\r\n                                    height={28}\r\n                                    travellerWidth={8}\r\n                                    stroke=\"#0b6e8b\"\r\n                                    fill=\"#052733\"\r\n                                    startIndex={idxRange?.[0]}\r\n                                    endIndex={idxRange?.[1]}\r\n                                    tickFormatter={(v: number) =>\r\n                                        new Date(v).toLocaleDateString(\"ja-JP\", { month: \"2-digit\", day: \"2-digit\" })\r\n                                    }\r\n                                    onChange={onBrushChange}\r\n                                />\r\n                            </AreaChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n\r\n                    {/* 変動の根拠 */}\r\n                    <div className=\"mt-4\">\r\n                        <div className=\"mb-2 flex items-center justify-between\">\r\n                            <h3 className=\"text-white/90 text-sm font-medium\">各時点の「変動の根拠」</h3>\r\n                            <span className=\"text-[11px] text-brand-200/70\">最新12件を表示</span>\r\n                        </div>\r\n                        <div className=\"max-h-56 overflow-auto rounded-xl border border-brand-900/40 bg-surface-100\">\r\n                            <table className=\"w-full text-[12px]\">\r\n                                <thead className=\"sticky top-0 bg-surface-100/95 backdrop-blur\">\r\n                                    <tr className=\"text-brand-200/70\">\r\n                                        <th className=\"px-3 py-2 text-left font-normal\">週</th>\r\n                                        <th className=\"px-3 py-2 text-right font-normal\">値</th>\r\n                                        <th className=\"px-3 py-2 text-right font-normal\">前週差</th>\r\n                                        <th className=\"px-3 py-2 text-left font-normal\">主要ドライバー</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {chartData.slice(-12).map((d: ChartPoint, i: number, arr: ChartPoint[]) => {\r\n                                        // d, i, arr の型が ChartPoint, number, ChartPoint[] として確定しました\r\n                                        const prevVal = arr[i - 1]?.value ?? d.value;\r\n                                        const dd = Number(d.value) - Number(prevVal);\r\n                                        const main = (d.evidence ?? []).slice(0, 3);\r\n                                        return (\r\n                                            <tr key={d.iso} className=\"border-t border-brand-900/30\">\r\n                                                <td className=\"px-3 py-2 text-brand-100/90\">\r\n                                                    {new Date(d.x).toLocaleDateString(\"ja-JP\", { month: \"2-digit\", day: \"2-digit\" })}\r\n                                                </td>\r\n                                                <td className=\"px-3 py-2 text-right text-white\">{Number(d.value).toFixed(2)}</td>\r\n                                                <td className={`px-3 py-2 text-right ${dd >= 0 ? \"text-emerald-300\" : \"text-rose-300\"}`}>\r\n                                                    {(dd >= 0 ? \"+\" : \"\") + dd.toFixed(2)}\r\n                                                </td>\r\n                                                <td className=\"px-3 py-2\">\r\n                                                    {main.length ? (\r\n                                                        <div className=\"flex flex-wrap gap-1\">\r\n                                                            {main.map((r: any, j: number) => (\r\n                                                                <Badge key={j}>\r\n                                                                    {(r.source ?? r.name ?? \"要因\") +\r\n                                                                        (typeof r.weight === \"number\" ? ` ${(r.weight * 100).toFixed(0)}%` : \"\")}\r\n                                                                </Badge>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    ) : <span className=\"text-brand-200/60\">根拠データなし</span>}\r\n                                                </td>\r\n                                            </tr>\r\n                                        );\r\n                                    })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                        <p className=\"mt-2 text-[11px] text-brand-200/60\">\r\n                            注: ドライバーは API 応答に含まれる <code>evidence / drivers / attribution</code> を自動表示します。\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 地図 */}\r\n                <div className=\"rounded-2xl shadow-soft p-5 bg-surface-200 border border-brand-900/40\">\r\n                    <h2 className=\"text-white/90 font-medium mb-3\">活動ヒート（サンプル）</h2>\r\n                    <div className=\"h-72\">\r\n                        <MapCard geo={geo} />\r\n                    </div>\r\n                    <p className=\"mt-2 text-xs text-brand-200/60\">※ デモデータ（OpenStreetMap タイル使用）</p>\r\n                </div>\r\n            </section>\r\n\r\n            <HelpDialog open={helpOpen} onClose={() => setHelpOpen(false)} />\r\n        </main>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}